{"version":3,"sources":["scripts/main.js"],"names":["textContent","direction","body","document","querySelector","list","head","firstElementChild","options","sortList","index","sortedList","children","sort","prev","cur","a","toLowerCase","b","includes","replace","append","notification","type","title","description","insertAdjacentHTML","setTimeout","removeChild","isValid","value","key","length","forEach","row","i","addEventListener","e","target","undefined","el","classList","remove","targetRow","closest","add","form","preventDefault","formData","FormData","tr","createElement","toLocaleString","reset","element","cellIndex","innerText","input","focus","eventKey","blur","eventBlur","isInputValid"],"mappings":";AAAA,aAqMA,SAAA,EAAA,EAAA,GAAA,OAAA,EAAA,IAAA,EAAA,EAAA,IAAA,EAAA,EAAA,IAAA,IAAA,SAAA,IAAA,MAAA,IAAA,UAAA,6IAAA,SAAA,EAAA,EAAA,GAAA,GAAA,oBAAA,QAAA,OAAA,YAAA,OAAA,GAAA,CAAA,IAAA,EAAA,GAAA,GAAA,EAAA,GAAA,EAAA,OAAA,EAAA,IAAA,IAAA,IAAA,EAAA,EAAA,EAAA,OAAA,cAAA,GAAA,EAAA,EAAA,QAAA,QAAA,EAAA,KAAA,EAAA,QAAA,GAAA,EAAA,SAAA,GAAA,GAAA,IAAA,MAAA,GAAA,GAAA,EAAA,EAAA,EAAA,QAAA,IAAA,GAAA,MAAA,EAAA,QAAA,EAAA,SAAA,QAAA,GAAA,EAAA,MAAA,GAAA,OAAA,GAAA,SAAA,EAAA,GAAA,GAAA,MAAA,QAAA,GAAA,OAAA,EAAA,SAAA,EAAA,GAAA,GAAA,oBAAA,QAAA,MAAA,EAAA,OAAA,UAAA,CAAA,GAAA,MAAA,QAAA,KAAA,EAAA,EAAA,IAAA,CAAA,IAAA,EAAA,EAAA,EAAA,aAAA,MAAA,CAAA,EAAA,EAAA,EAAA,WAAA,OAAA,GAAA,EAAA,OAAA,CAAA,MAAA,GAAA,CAAA,MAAA,EAAA,MAAA,EAAA,OAAA,EAAA,SAAA,GAAA,MAAA,GAAA,EAAA,GAAA,MAAA,IAAA,UAAA,yIAAA,IAAA,EAAA,EAAA,GAAA,EAAA,GAAA,EAAA,MAAA,CAAA,EAAA,WAAA,EAAA,EAAA,OAAA,aAAA,EAAA,WAAA,IAAA,EAAA,EAAA,OAAA,OAAA,EAAA,EAAA,KAAA,GAAA,EAAA,SAAA,GAAA,GAAA,EAAA,EAAA,GAAA,EAAA,WAAA,IAAA,GAAA,MAAA,EAAA,QAAA,EAAA,SAAA,QAAA,GAAA,EAAA,MAAA,KAAA,SAAA,EAAA,GAAA,OAAA,EAAA,IAAA,EAAA,IAAA,EAAA,IAAA,IAAA,SAAA,IAAA,MAAA,IAAA,UAAA,wIAAA,SAAA,EAAA,EAAA,GAAA,GAAA,EAAA,CAAA,GAAA,iBAAA,EAAA,OAAA,EAAA,EAAA,GAAA,IAAA,EAAA,OAAA,UAAA,SAAA,KAAA,GAAA,MAAA,GAAA,GAAA,MAAA,WAAA,GAAA,EAAA,cAAA,EAAA,EAAA,YAAA,MAAA,QAAA,GAAA,QAAA,EAAA,MAAA,KAAA,GAAA,cAAA,GAAA,2CAAA,KAAA,GAAA,EAAA,EAAA,QAAA,GAAA,SAAA,EAAA,GAAA,GAAA,oBAAA,QAAA,OAAA,YAAA,OAAA,GAAA,OAAA,MAAA,KAAA,GAAA,SAAA,EAAA,GAAA,GAAA,MAAA,QAAA,GAAA,OAAA,EAAA,GAAA,SAAA,EAAA,EAAA,IAAA,MAAA,GAAA,EAAA,EAAA,UAAA,EAAA,EAAA,QAAA,IAAA,IAAA,EAAA,EAAA,EAAA,IAAA,MAAA,GAAA,EAAA,EAAA,IAAA,EAAA,GAAA,EAAA,GAAA,OAAA,EAlMA,IAGIA,EACAC,EAJEC,EAAOC,SAASC,cAAc,QAC9BC,EAAOF,SAASC,cAAc,SAC9BE,EAAOH,SAASC,cAAc,SAASG,kBAIvCC,EAAN,6RASA,SAASC,EAASC,GACVC,IAAAA,EAAa,EAAIN,EAAKO,UAAUC,KAAK,SAACC,EAAMC,GAC5CC,IAAAA,EAAIF,EAAKF,SAASF,GAAOV,YAAYiB,cACrCC,EAAIH,EAAIH,SAASF,GAAOV,YAAYiB,cAOjCD,OALHA,EAAEG,SAAS,MAAQD,EAAEC,SAAS,QAChCH,GAAKA,EAAEI,QAAQ,QAAS,IACxBF,GAAKA,EAAEE,QAAQ,QAAS,KAGnBJ,EAAIE,EAAIjB,EAAYe,EAAIE,GAAKjB,EAAY,IAGlDI,EAAKgB,OAALhB,MAAAA,EAAeM,EAAAA,IAGjB,SAASW,EAAaC,EAAMC,EAAOC,GACjCvB,EAAKwB,mBAAmB,YACKH,kCAAAA,OAAAA,EACLC,uDAAAA,OAAAA,EACfC,oBAAAA,OAAAA,EAHT,yBAOAE,WAAW,WACTzB,EAAK0B,YAAYzB,SAASC,cAAc,mBACvC,KAGL,SAASyB,EAAQC,EAAOC,GAClB,OAACD,EAUO,SAARC,GAAkBD,EAAME,OAAS,GACnCV,EACE,QACA,QACA,oDAGK,GAGG,aAARS,GAAsBD,EAAME,OAAS,GACvCV,EACE,QACA,QACA,wDAGK,GAGG,QAARS,MAAmBD,EAAQ,KAAOA,EAAQ,MAC5CR,EACE,QACA,QACA,kCAGK,IApCPA,EACE,QACA,QACA,kCAGK,GAoCX,EAAIhB,EAAKM,UAAUqB,QAAQ,SAACC,EAAKC,GAC/BD,EAAIE,iBAAiB,QAAS,SAAAC,GACxBrC,IAAgBqC,EAAEC,OAAOtC,aAC3BA,OAAcuC,EACdtC,GAAa,IAEbA,EAAY,EACZD,EAAcqC,EAAEC,OAAOtC,aAGzBS,EAAS0B,OAIbhC,SAASiC,iBAAiB,QAAS,SAAAC,GAC7BhC,EAAAA,EAAKO,UAAUqB,QAAQ,SAAAO,GAAMA,OAAAA,EAAGC,UAAUC,OAAO,YAE/CC,IAAAA,EAAYN,EAAEC,OAAOM,QAAQ,MAE/BD,GAAaA,EAAUC,QAAQ,UACjCD,EAAUF,UAAUI,IAAI,YAI5B3C,EAAKwB,mBAAmB,YAwBuBlB,4aAAAA,OAAAA,EAxB/C,sYAgDA,IAAMsC,EAAO3C,SAASC,cAAc,sBAEpC0C,EAAKV,iBAAiB,SAAU,SAAAC,GAC9BA,EAAEU,iBAEIC,IAH6B,EAG7BA,EAAW,IAAIC,SAASH,GACxBI,EAAK/C,SAASgD,cAAc,MAEPH,EAAAA,EAAAA,GANQ,IAME,IAAA,EAAA,MAAA,EAAA,EAAA,KAAA,MAAA,CAAA,IAAA,EAAA,EAAA,EAAA,MAAA,GAAzBjB,EAAyB,EAAA,GAApBD,EAAoB,EAAA,GAC/B,IAACD,EAAQC,EAAOC,GAClB,OAGU,WAARA,EACFmB,EAAGxB,mBAAmB,YACZ,QAAA,SAAEI,GAAOsB,eAAe,MADlC,UAGAF,EAAGxB,mBACD,YACOI,OAAAA,OAAAA,EAFT,WAf+B,MAAA,GAAA,EAAA,EAAA,GAAA,QAAA,EAAA,IAsBnCR,EACE,UACA,UACA,yCAGFjB,EAAKgB,OAAO6B,GACZJ,EAAKO,UAGPhD,EAAK+B,iBAAiB,WAAY,SAAAC,GAC1BiB,IAAAA,EAAUjB,EAAEC,OACZ5B,EAAQ4C,EAAQC,UAChBC,EAAYF,EAAQE,UACpBC,EAAkB,IAAV/C,EACVP,SAASgD,cAAc,UACvBhD,SAASgD,cAAc,SAMnBzC,OAJR4C,EAAQE,UAAY,GACpBC,EAAM3B,MAAQ0B,EACdC,EAAMhB,UAAUI,IAAI,cAEZnC,GACD,KAAA,EACH+C,EAAM/B,mBACJ,YACGlB,GAAAA,OAAAA,EAFL,aAKA,MACG,KAAA,EACHiD,EAAMlC,KAAO,SAEb,MACG,KAAA,EACHkC,EAAM3B,MAAQ0B,EAAUpC,QAAQ,QAAS,IACzCqC,EAAMlC,KAAO,SAEb,MACF,QACEkC,EAAMlC,KAAO,OAGjB+B,EAAQjC,OAAOoC,GACfA,EAAMC,QAEND,EAAMrB,iBAAiB,WAAY,SAAAuB,GACZ,UAAjBA,EAAS5B,KACX0B,EAAMG,SAIVH,EAAMrB,iBAAiB,OAAQ,SAAAyB,GACzBC,IAAAA,EAEIpD,OAAAA,GACD,KAAA,EACHoD,EAAejC,EAAQ4B,EAAM3B,MAAO,QAEpC,MAEG,KAAA,EACHgC,EAAejC,EAAQ4B,EAAM3B,MAAO,YAEpC,MAEG,KAAA,EACHgC,EAAcjC,EAAQ4B,EAAM3B,MAAO,OAEnC,MAEG,KAAA,EACHgC,EAAeL,EAAM3B,OAAS,EAE9B,MAEF,QACEgC,GAAe,EAMjBR,EAAQE,UAHLM,EAG2B,IAAVpD,EACZ,IAAA,SAAE+C,EAAM3B,OAAOsB,kBACnBK,EAAM3B,MAJU0B,EAOtBC,EAAMf","file":"main.eb983887.js","sourceRoot":"../src","sourcesContent":["'use strict';\n\n// write code here\nconst body = document.querySelector('body');\nconst list = document.querySelector('tbody');\nconst head = document.querySelector('thead').firstElementChild;\nlet textContent;\nlet direction;\n\nconst options = `\n  <option value=\"Tokyo\">Tokyo</option>\n  <option value=\"Singapore\">Singapore</option>\n  <option value=\"London\">London</option>\n  <option value=\"New York\">New York</option>\n  <option value=\"Edinburgh\">Edinburgh</option>\n  <option value=\"San Francisco\">San Francisco</option>\n`;\n\nfunction sortList(index) {\n  const sortedList = [...list.children].sort((prev, cur) => {\n    let a = prev.children[index].textContent.toLowerCase();\n    let b = cur.children[index].textContent.toLowerCase();\n\n    if (a.includes('$') || b.includes('$')) {\n      a = +a.replace(/[$,]/g, '');\n      b = +b.replace(/[$,]/g, '');\n    }\n\n    return a > b ? direction : a < b ? -direction : 0;\n  });\n\n  list.append(...sortedList);\n}\n\nfunction notification(type, title, description) {\n  body.insertAdjacentHTML('beforeend', `\n    <div class=\"notification ${type}\" data-qa=\"notification\">\n      <h2 class=\"title\">${title}</h2>\n      <p>${description}</p>\n    </div>\n  `);\n\n  setTimeout(() => {\n    body.removeChild(document.querySelector('.notification'));\n  }, 2000);\n}\n\nfunction isValid(value, key) {\n  if (!value) {\n    notification(\n      'error',\n      'Error',\n      'You must complete every field'\n    );\n\n    return false;\n  }\n\n  if (key === 'name' && value.length < 4) {\n    notification(\n      'error',\n      'Error',\n      'Name field must be at least 4 characters length'\n    );\n\n    return false;\n  }\n\n  if (key === 'position' && value.length < 3) {\n    notification(\n      'error',\n      'Error',\n      'Position field must be at least 3 characters length'\n    );\n\n    return false;\n  }\n\n  if (key === 'age' && (+value < 18 || +value > 90)) {\n    notification(\n      'error',\n      'Error',\n      'Age must be between 18 and 90'\n    );\n\n    return false;\n  }\n\n  return true;\n}\n\n[...head.children].forEach((row, i) => {\n  row.addEventListener('click', e => {\n    if (textContent === e.target.textContent) {\n      textContent = undefined;\n      direction = -1;\n    } else {\n      direction = 1;\n      textContent = e.target.textContent;\n    }\n\n    sortList(i);\n  });\n});\n\ndocument.addEventListener('click', e => {\n  [...list.children].forEach(el => el.classList.remove('active'));\n\n  const targetRow = e.target.closest('tr');\n\n  if (targetRow && targetRow.closest('tbody')) {\n    targetRow.classList.add('active');\n  }\n});\n\nbody.insertAdjacentHTML('beforeend', `\n  <form\n    class=\"new-employee-form\"\n    action=\"/\"\n    method=\"post\"\n  >\n    <label>\n      Name:\n      <input\n        name=\"name\"\n        type=\"text\"\n        data-qa=\"name\"\n      >\n    </label>\n    <label>\n      Position:\n      <input\n        name=\"position\"\n        type=\"text\"\n        data-qa=\"position\"\n      >\n    </label>\n    <label>\n      Office:\n      <select name=\"office\" data-qa=\"office\">${options}</select>\n    </label>\n    <label>\n      Age:\n      <input\n        name=\"age\"\n        type=\"number\"\n        data-qa=\"age\"\n        min=\"0\"\n      >\n    </label>\n    <label>\n      Salary:\n      <input\n        name=\"salary\"\n        type=\"number\"\n        data-qa=\"salary\"\n        min=\"0\"\n      >\n    </label>\n    <button type=\"submit\">Save to table</button>\n  </form>\n`);\n\nconst form = document.querySelector('.new-employee-form');\n\nform.addEventListener('submit', e => {\n  e.preventDefault();\n\n  const formData = new FormData(form);\n  const tr = document.createElement('tr');\n\n  for (const [key, value] of formData) {\n    if (!isValid(value, key)) {\n      return;\n    }\n\n    if (key === 'salary') {\n      tr.insertAdjacentHTML('beforeend',\n        `<td>$${(+value).toLocaleString('en')}</td>`);\n    } else {\n      tr.insertAdjacentHTML(\n        'beforeend',\n        `<td>${value}</td>`\n      );\n    }\n  }\n\n  notification(\n    'success',\n    'Success',\n    'Employee has been added successfully!'\n  );\n\n  list.append(tr);\n  form.reset();\n});\n\nlist.addEventListener('dblclick', e => {\n  const element = e.target;\n  const index = element.cellIndex;\n  const innerText = element.innerText;\n  const input = index === 2\n    ? document.createElement('select')\n    : document.createElement('input');\n\n  element.innerText = '';\n  input.value = innerText;\n  input.classList.add('cell-input');\n\n  switch (index) {\n    case 2:\n      input.insertAdjacentHTML(\n        'beforeend',\n        `${options}\n      `);\n\n      break;\n    case 3:\n      input.type = 'number';\n\n      break;\n    case 4:\n      input.value = innerText.replace(/[$,]/g, '');\n      input.type = 'number';\n\n      break;\n    default:\n      input.type = 'text';\n  }\n\n  element.append(input);\n  input.focus();\n\n  input.addEventListener('keypress', eventKey => {\n    if (eventKey.key === 'Enter') {\n      input.blur();\n    }\n  });\n\n  input.addEventListener('blur', eventBlur => {\n    let isInputValid;\n\n    switch (index) {\n      case 0:\n        isInputValid = isValid(input.value, 'name');\n\n        break;\n\n      case 1:\n        isInputValid = isValid(input.value, 'position');\n\n        break;\n\n      case 3:\n        isInputValid= isValid(input.value, 'age');\n\n        break;\n\n      case 4:\n        isInputValid = input.value >= 0;\n\n        break;\n\n      default:\n        isInputValid = true;\n    }\n\n    if (!isInputValid) {\n      element.innerText = innerText;\n    } else {\n      element.innerText = index === 4\n        ? `$${(+input.value).toLocaleString()}`\n        : input.value;\n    }\n\n    input.remove();\n  });\n});\n"]}